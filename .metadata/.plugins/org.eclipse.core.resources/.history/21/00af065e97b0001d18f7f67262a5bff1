/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2023 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

#include <stdint.h>
#include <stdint.h>

// AHB1 address loc
#define RCC_base_addr (*(uint32_t *)0x40023800)	// memory addr
#define AHBI_REG_ADDR (*(uint32_t *)0x40023830)	// 32 bit wide
#define GPIOD_EN 3					// (bit) Shift to bit

// GPIOD config
#define GPIOD_base_addr (*(uint32_t*)0x40020C00)
#define PORT_MODE_R_offset 0x00		// 32 bit wide, 2 bits per port
#define PORT_OUTPUT_TYPE 0x04
#define PORT_OUTPUT_DATA 0x14

#define PORT_MODE_ADDR (*(uint32_t*)0x40020C00)
#define PORT_OUTPUT_TYPE_ADDR (*(uint32_t*)0x40020C04)
#define PORT_OUTPUT_DATA_ADDR (*(uint32_t*)0x40020C14)


void setupGPIOD(){
	// Enable the GPIO port
	AHBI_REG_ADDR |= (1 << GPIOD_EN);

	// Set the port mode for GPIOD pin 12
	PORT_MODE_ADDR = 0x01000000; // as general output
}


int main(void)
{
    setupGPIOD();

    //turn the led on
    PORT_OUTPUT_DATA_ADDR |= (1 << 12);

	for(;;);
}
